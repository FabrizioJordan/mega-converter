---
import HEXtoRGB from "./Colors/HEXtoRGB.astro";
import HSL from "./Colors/HSL.astro";
import Currency from "./Currency.astro";

import EMtoPX from "./Text/EMtoPX.astro";

import MassWeightConverter from "./Length/MassWeightConverter.astro";
import LengthConverter from "./Length/LengthConverter.astro";

---


<section class="flex flex-col gap-24 md:gap-44 text-white">
    
    <article class="max-w-2xl flex flex-col justify-center items-start gap-8">
        <h3 class="text-3xl md:text-4xl text-balance !leading-[5.5rem]">Software Converters.</h3>

        <ul class="[&_h6]:transition-colors [&_h6]:duration-300 [&_h6]:cursor-pointer [&_h6]:text-[#8a847a] hover:[&_h6]:text-white flex flex-row justify-center items-center gap-8 tracking-wide text-lg">
            <li>
                <h6 class="initTitle-1 !text-white">
                    Not one
                </h6>
            </li>
            <li>
                <h6 class="initTitle-2">
                    Converter
                </h6>
            </li>
            <li>
                <h6 class="initTitle-3">    
                    EM a PX
                </h6>
            </li>
            <li>
                <h6 class="initTitle-4">
                    Currency converter
                </h6>
            </li>
            <li>
                <h6 class="initTitle-5">
                    Color converter
                </h6>
            </li>
        </ul>

        <ul class="flex flex-row [&>li]:opacity-0 [&>li]:transition-opacity [&>li]:duration-500">
            <li class="initText-1 !opacity-100">
            </li>
            <li class="initText-2">
                <MassWeightConverter />
            </li>
            <li class="initText-3 hidden">
                <EMtoPX />
            </li>
            <li class="initText-4 hidden">
                <Currency />
            </li>
            <li class="initText-5 hidden flex flex-col gap-8">
                <h1 class="text-lg">Color Converter</h1>
                <HEXtoRGB />
                <HSL />
            </li>
        </ul>
    </article>

</section>


<script is:inline>
    // @ts-nocheck

    
  document.addEventListener("astro:page-load", () => {

    function initConverterScript () {
        let $ = selector => document.querySelector(selector);
    
        let initTexts = [];
        let initTitles = [];
        let quantityOfText = 5;
    
        for (let i = 1; i <= quantityOfText; i++) {
            initTexts[`initText${i}`] = $(`.initText-${i}`);
            initTitles[`initTitle${i}`] = $(`.initTitle-${i}`);
    
            if (initTitles[`initTitle${i}`]) {
                initTitles[`initTitle${i}`].addEventListener('click', () => {
                    // Ocultar todos los initTexts
                    for (let j = 1; j <= quantityOfText; j++) {
                        initTexts[`initText${j}`].classList.add('hidden');
                        setTimeout(() => {
                            initTexts[`initText${j}`].classList.remove('!opacity-100');
                        }, 100);
                        initTitles[`initTitle${j}`].classList.remove('!text-white');
                    }
    
                    // Mostrar el initText correspondiente al initTitle clickeado
                    initTexts[`initText${i}`].classList.remove('hidden');
                    setTimeout(() => {
                        initTexts[`initText${i}`].classList.add('!opacity-100');
                    }, 100);
                    initTitles[`initTitle${i}`].classList.add('!text-white');
    
                    // Guardar el estado en localStorage
                    localStorage.setItem('activeConverter', i);
                });
            }
        }
    
        // Recuperar el estado del conversor activo desde localStorage
        const activeConverter = localStorage.getItem('activeConverter');
        if (activeConverter) {
            // Simular clic en el t√≠tulo correspondiente para mostrar el conversor guardado
            initTitles[`initTitle${activeConverter}`].click();
        } else {
            // Mostrar el primer conversor si no hay ninguno guardado
            initTitles[`initTitle1`].click();
        }
    }
    
    initConverterScript();

})
    </script>